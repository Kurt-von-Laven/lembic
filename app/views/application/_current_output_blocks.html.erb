<h3>Current Output Blocks</h3>

<table class = "tablesorter">

<!--Table Headers -->
<thead>
  <tr>
    <th>Name</th>
	<th>Outputs</th>
	<th>Display Type</th>
	<th><!--Delete --></th>
  </tr>
</thead>

<!--Table Body -->
<tbody>
	
	<!--Each Block on a row, with all its connections put together into a string -->
	<!--TODO: Come up with a better way to display the blocks -->
	<% for block in @blocks %>
	
	  <!--Skip regular blocks with a nil display_type -->
	  <% if block.display_type.nil? %>
		<% next %>
	  <% end %>
	
	  <!--Prepare strings to be displayed in HTML for this block -->
	  <% name = block.name %>
	
	  <!--Concat block_input fields into a string -->
	  <% inputs = "" %>
	  <% for bi in block.block_inputs %>
	    <% inputs += bi.variable.name + ", " %>
	  <% end %>
	  <% inputs = inputs.strip.chomp(",") %>
	
	  <!--Get display_type -->
	  <% display_type = block.display_type %>
	
	  <!--Generate HTML for a delete button -->
	  <% buttonHTML = button_to "Delete", delete_block_path(block.id), :confirm => "Are you sure?", :method => :delete %>
	  
	  <!--Render this block in HTML -->
      <tr><td><%=name %></td><td><%=inputs %></td><td><%=display_type %></td><td><%=buttonHTML %></td></tr>
	<% end %>
	
</tbody>  
</table>
