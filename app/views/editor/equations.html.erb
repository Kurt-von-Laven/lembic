
<% @title = "Equation Editor" %>

<!--Slider Script -->
<script type="text/javascript">
	$(function() {
		$( "#slider" ).slider();
	});
</script>
 
      
<h1>Equation Editor</h1>

<h3>Create Magical Anything You Feel Like</h3>

<%= form_for(:new_equation, :html => {:class => "input_form"}) do |f| %>
<div id="var_input_block">
	<div>
		<%= f.label(:variable_type, "Variable Type:") %>
		<%= f.select(:variable_type, [['Categorical', '0'], ['Integer',
		'1'], ['Real', '2'], ['Date and Time', '3']]) %>
	  </div>

	  <div>
		<%= f.label(:description, "Description:") %>
		<%= f.text_field(:description) %>
	  </div>
		<div>
		<%= f.check_box(:array) %>
		<%= f.label(:array, "Is this an array?") %>
	  </div>
	</div>
	<div id = "expression">
		<%= f.text_field(:name) %> = 
		<%= f.text_area(:expression_string) %>
	</div>
	
	<%= render(:partial => 'flash_message', :locals => {:flash_symbol => :variable_not_saved, :tag => 'div', :class_name => 'error'}) %>
	 <div style="text-align: center">
		<%= f.submit("Create Equation", :class => "button") %>
	 </div>
<% end %>

<h3> Create a Date and Time Variable</h3>
<%= form_for(:date_picker, :html => {:class => "input_form"}) do |f| %>
<div id="var_input_block">
  <div>Date: <input type="text" id="datepicker"></input></div>
  
  <p>Format options:<br />
    <select id="format">
      <option value="mm/dd/yy">Default - mm/dd/yy</option>
      <option value="yy-mm-dd">ISO 8601 - yy-mm-dd</option>
      <option value="d M, y">Short - d M, y</option>
      <option value="d MM, y">Medium - d MM, y</option>
      <option value="DD, d MM, yy">Full - DD, d MM, yy</option>
      <option value="'day' d 'of' MM 'in the year' yy">With text - 'day' d 'of' MM 'in the year' yy</option>
    </select>
  </p>
  
  
  <!-- Slider -->
  <p>
    <label for="time">Time range (in military time):</label>
    <input type="text" id="time" style="border:0; color:#f6931f; font-weight:bold;" />
  </p>
  
  <div id="slider-range"></div>
  
 </div> 
  <!--Submit-->
  <div>
    
    <p class="submit_paragraph">
      <%= f.submit("Upload Date", :id => "date_submit", :class => "button") %>
    </p>
  </div>
<% end %>

<p id = "hello">If you click on the "Hide" button, I will disappear.</p>
<button id="hide">Hide</button>



<h3>Upload Array</h3> 
<%= form_for(:new_constant_array, :html => {:multipart => true, :class => "input_form"}) do |f| %>
  <div id="var_input_block">
		<div>
		  <%= f.label(:name, "Variable Name:") %>
		  <%= f.text_field(:name) %>
		</div>
		<div>
		  <%= f.label(:variable_type, "Variable Type:") %>
		  <%= f.select(:variable_type, [['Categorical', '0'], ['Integer',
		  '1'], ['Real', '2'], ['Date and Time', '3']]) %>
		</div>
		<div>
		  <%= f.label(:description, "Description:") %>
		  <%= f.text_field(:description) %>
		</div>
		<div>
		  <%= f.label(:column_number, "First column of array ") %>
		  <%= f.text_field(:column_number, :class => "numeric_input") %>  "(e.g., 1 for the left-most column)?"
		</div>
		<div>
		  <%= f.label(:start_row, "First row of array ") %>
		  <%= f.text_field(:start_row, :class => "numeric_input") %>  "(e.g., 1 for the top-most row)?"
		</div>
		
		<%= render(:partial => 'flash_message', :locals => {:flash_symbol => :variable_not_saved, :tag => 'div', :class_name => 'error'}) %>
		<div>
		  <%= f.label(:data_file, "Select a CSV file.") %>
		  <%= f.file_field(:data_file) %>
		</div>
	</div>
    <div style="text-align: center">
      <%= f.submit("Upload Array", :id => "file_upload_submit", :class => "button") %>
    </div>

<% end %>

<h3>Current Equations</h3>
<table cellpadding="2" cellspacing="0">
  <tr>
    <th>Equation</th>
    <th></th>
  </tr>
  <% for variable in @variables %>
    <tr>
      <td class="preserve_whitespace"><%= variable.name %> = <%=variable.expression_string %></td>
      <td class="delete">
        <%= button_to "Delete this relationship", "#{delete_relationship_path}?id=#{variable.id}",
           {:confirm => "Are you sure you want to delete the relationship for the variable named #{variable.name}?",
            :method => :delete} %>
      </td>
    </tr>
  <% end %>
</table>

<%= render "current_variables" %>
